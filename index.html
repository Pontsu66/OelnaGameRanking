<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <title>Peli Ranking / Game Ranking</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #eee; text-align: center; padding: 40px; }
    h1 { margin-bottom: 10px; }
    .buttons { display: flex; justify-content: center; gap: 20px; margin-top: 40px; flex-wrap: wrap; }
    button { background: #222; color: #fff; border: 2px solid #444; padding: 20px 30px; font-size: 18px; cursor: pointer; border-radius: 10px; width: 250px; height: 80px; overflow: hidden; display: flex; align-items: center; justify-content: center; text-align: center; white-space: normal; word-wrap: break-word; }
    button:hover { background: #333; }
    #battleNumber { margin-top: 20px; font-size: 18px; }
    #instructions { margin-bottom: 20px; font-size: 16px; }
  </style>
</head>
<body>

<h1>Peli Ranking / Game Ranking</h1>
<div id="instructions">
  Klikkaa peliä, joka on parempi! / Click on the game you like more!<br>
  Jos et voi valita, klikkaa "Molemmat yhtä hyviä" / If you cannot choose, click "I feel the same way about both".
</div>

<div class="buttons">
  <button id="leftBtn"></button>
  <button id="tieBtn">Molemmat yhtä hyviä / I feel the same way about both</button>
  <button id="rightBtn"></button>
</div>

<div id="battleNumber">Battle no. 1</div>
<div id="progress" style="margin-top:30px;font-size:18px;"></div>

<script>
  const EXPLORATION_ROUNDS = 70;
  const MAX_VOTES = 350;

  const games = [
    "Clair Obscur: Expedition 33","Kingdom Come: Deliverance 2","Undertale","Deltarune","Portal 2",
    "Silent Hill 2","Assassin's Creed II","Assassin's Creed IV: Black Flag","Chrono Trigger","Alan Wake",
    "Fable","Minecraft","Astro Bot","Life is Strange","Stalker: Shadow of Chernobyl",
    "Stalker 2: Heart of Chernobyl","Stalker: Call of Pripyat","Phoenix Wright: Ace Attorney","Stardew Valley","The Binding of Isaac: Rebirth"
    // Lisää loput pelit tähän...
  ];

  const stats = {};
  games.forEach(g => stats[g] = { wins: 0, losses: 0, ties: 0 });

  let totalVotes = 0;
  let currentPair = [];
  const leftBtn = document.getElementById('leftBtn');
  const rightBtn = document.getElementById('rightBtn');
  const tieBtn = document.getElementById('tieBtn');
  const battleNumberDiv = document.getElementById('battleNumber');

  function rand(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

  function pickPair() {
    if (totalVotes < EXPLORATION_ROUNDS) {
      let a, b;
      do {
        a = rand(games);
        b = rand(games);
      } while (a === b);
      currentPair = [a, b];
    } else {
      // Championship-style: voittajapeli voi pysyä pidempään
      if (!currentPair[0]) currentPair = [rand(games), rand(games)];
      if (currentPair[0] === currentPair[1]) currentPair[1] = rand(games.filter(g => g !== currentPair[0]));
    }
  }

  function showPair() {
    pickPair();
    leftBtn.textContent = currentPair[0];
    rightBtn.textContent = currentPair[1];
  }

  function updateProgress() {
    const p = Math.min(100, Math.round((totalVotes / MAX_VOTES) * 100));
    document.getElementById('progress').textContent = `Ranking valmis noin ${p} % / Ranking approximately ${p} %`;
    battleNumberDiv.textContent = `Battle no. ${totalVotes + 1}`;
    if (totalVotes >= MAX_VOTES) showFinalRanking();
  }

  function vote(winner, loser) {
    stats[winner].wins++;
    stats[loser].losses++;
    totalVotes++;
    updateProgress();
    showPair();
  }

  function tieVote() {
    totalVotes++;
    updateProgress();
    showPair();
  }

  function showFinalRanking() {
    leftBtn.style.display = rightBtn.style.display = tieBtn.style.display = 'none';
    const ranking = Object.keys(stats).sort((a, b) => stats[b].wins - stats[a].wins);
    document.getElementById('progress').innerHTML = '<h2>Loppuranking / Final Ranking</h2><ol>' + ranking.map(g => `<li>${g} (${stats[g].wins})</li>`).join('') + '</ol>';
  }

  leftBtn.onclick = () => vote(currentPair[0], currentPair[1]);
  rightBtn.onclick = () => vote(currentPair[1], currentPair[0]);
  tieBtn.onclick = tieVote;

  showPair();
  updateProgress();
</script>

</body>
</html>

